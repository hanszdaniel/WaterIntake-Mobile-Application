<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="WaterIntake.RecordPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Records">

    <!-- ðŸŒŸ Toolbar -->
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Menu" Clicked="OnMenuClicked" />
    </ContentPage.ToolbarItems>

    <!-- ðŸŒŸ Pull-to-Refresh -->
    <RefreshView x:Name="RecordsRefreshView" Command="{Binding RefreshCommand}">

        <CollectionView
            ItemsSource="{Binding Records}"
            Margin="15"
            VerticalOptions="FillAndExpand">

            <!-- ðŸŒŸ Header -->
            <CollectionView.Header>
                <Grid Padding="10"
                      BackgroundColor="#F2F2F2"
                      ColumnSpacing="8"
                      ColumnDefinitions="1.0*,0.8*,1*,1*,1*,0.6*,0.6*">

                    <Label Text="Date" Grid.Column="0" HorizontalTextAlignment="Center"
                           FontAttributes="Bold" FontSize="13" />

                    <Label Text="Time" Grid.Column="1" HorizontalTextAlignment="Center"
                           FontAttributes="Bold" FontSize="13" />

                    <Label Text="Goal" Grid.Column="2" HorizontalTextAlignment="Center"
                           FontAttributes="Bold" FontSize="13" />

                    <Label Text="Intake" Grid.Column="3" HorizontalTextAlignment="Center"
                           FontAttributes="Bold" FontSize="13" />

                    <Label Text="Progress" Grid.Column="4" HorizontalTextAlignment="Center"
                           FontAttributes="Bold" FontSize="13" />

                    <Label Text="" Grid.Column="5" />
                    <Label Text="" Grid.Column="6" />
                </Grid>
            </CollectionView.Header>

            <!-- ðŸŒŸ Each Row -->
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="White"
                           CornerRadius="14"
                           Padding="14"
                           Margin="0,8"
                           HasShadow="True">

                        <Frame.Shadow>
                            <Shadow Brush="#C8C8C8" Offset="0,4" Opacity="0.4" Radius="8" />
                        </Frame.Shadow>

                        <Grid ColumnSpacing="8"
                              ColumnDefinitions="1.0*,0.8*,1*,1*,1*,0.6*,0.6*">

                            <Label Text="{Binding Date}" Grid.Column="0" 
                                   FontSize="13" HorizontalTextAlignment="Center" />

                            <Label Text="{Binding Time}" Grid.Column="1" 
                                   FontSize="13" HorizontalTextAlignment="Center" />

                            <Label Text="{Binding Goal}" Grid.Column="2" 
                                   FontSize="13" HorizontalTextAlignment="Center" />

                            <Label Text="{Binding IntakeDisplay}" Grid.Column="3" 
                                   FontSize="13" HorizontalTextAlignment="Center" />

                            <Label Text="{Binding Progress}" Grid.Column="4"
                                   TextColor="{Binding ProgressColor}"
                                   FontAttributes="Bold"
                                   FontSize="13"
                                   HorizontalTextAlignment="Center" />

                            <!-- âœ EDIT BUTTON -->
                            <Button Text="âœ"
                                    Grid.Column="5"
                                    BackgroundColor="Transparent"
                                    TextColor="#0077CC"
                                    FontSize="20"
                                    Padding="0"
                                    Clicked="OnEditButtonClicked" />

                            <!-- ðŸ—‘ DELETE BUTTON -->
                            <Button Text="ðŸ—‘"
                                    Grid.Column="6"
                                    BackgroundColor="Transparent"
                                    TextColor="Red"
                                    FontSize="20"
                                    Padding="0"
                                    Clicked="OnDeleteButtonClicked" />

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </RefreshView>

</ContentPage>
